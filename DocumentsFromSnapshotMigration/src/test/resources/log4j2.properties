status = ERROR

property.logsDir = ${env:SHARED_LOGS_DIR_PATH:-./logs}
property.failedLoggerFileNamePrefix = ${logsDir}/${hostName}/failedRequests/failedRequests

appenders = console, FailedRequests

appender.FailedRequests.type = RollingRandomAccessFile
appender.FailedRequests.name = FailedRequests
appender.FailedRequests.fileName = ${failedLoggerFileNamePrefix}.log
appender.FailedRequests.filePattern = ${failedLoggerFileNamePrefix}-%d{yyyy-MM-dd-HH:mm}{UTC}-%i.log.gz
appender.FailedRequests.layout.type = PatternLayout
appender.FailedRequests.layout.pattern = %m%n
appender.FailedRequests.policies.type = Policies
appender.FailedRequests.policies.size.type = SizeBasedTriggeringPolicy
appender.FailedRequests.policies.size.size = 10 MB
appender.FailedRequests.strategy.type = DefaultRolloverStrategy
appender.FailedRequests.immediateFlush = false

logger.FailedRequestsLogger.name = FailedRequestsLogger
logger.FailedRequestsLogger.level = info
logger.FailedRequestsLogger.additivity = false
logger.FailedRequestsLogger.appenderRef.FailedRequests.ref = FailedRequests

appender.console.type = Console
appender.console.name = Console
appender.console.target = SYSTEM_OUT
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = %d{HH:mm:ss.SSS} %threadName %-5p %c{1}:%L - %m%n

rootLogger.level = info
rootLogger.appenderRef.console.ref = Console

logger.wireLogger.name = org.apache.http.wire
logger.wireLogger.level = OFF
logger.wireLogger.additivity = false

# Run and discard TRACE logs from owned packages to test executed paths
appender.testTraceIgnoreAppender.type = Null
appender.testTraceIgnoreAppender.name = TestTraceIgnoreAppender
logger.migrationsTraceIgnoreLogger.name = org.opensearch.migrations
logger.migrationsTraceIgnoreLogger.additivity = false
logger.migrationsTraceIgnoreLogger.appenderRef.0.ref = TestTraceIgnoreAppender
logger.migrationsTraceIgnoreLogger.appenderRef.0.level = all
logger.migrationsTraceIgnoreLogger.appenderRef.1.ref = Console
logger.migrationsTraceIgnoreLogger.appenderRef.1.level = info
logger.migrationsTraceIgnoreLogger.level = all

logger.rfsTraceIgnoreLogger.name = com.rfs
logger.rfsTraceIgnoreLogger.additivity = false
logger.rfsTraceIgnoreLogger.appenderRef.0.ref = TestTraceIgnoreAppender
logger.rfsTraceIgnoreLogger.appenderRef.0.level = all
logger.rfsTraceIgnoreLogger.appenderRef.1.ref = Console
logger.rfsTraceIgnoreLogger.appenderRef.1.level = info
logger.rfsTraceIgnoreLogger.level = all
